extend type Query {
  dashboard(id: String!): Dashboard! @hasScope(scope: "workspace:read")
}

extend type Mutation {
  dashboardMutations: DashboardMutations!
    @hasServerRole(role: SERVER_GUEST)
    @hasScope(scope: "workspace:update")
}

type DashboardMutations {
  create(workspace: WorkspaceIdentifier!, input: DashboardCreateInput!): Dashboard!
  delete(id: String!): Boolean!
  update(input: DashboardUpdateInput!): Dashboard!
}

extend type Workspace {
  dashboards(
    limit: Int! = 50
    cursor: String
    filter: WorkspaceDashboardsFilter
  ): DashboardCollection!
}

extend type Project {
  dashboards(
    limit: Int! = 50
    cursor: String
    filter: ProjectDashboardsFilter
  ): DashboardCollection!
}

type Dashboard {
  id: String!
  name: String!
  workspace: LimitedWorkspace!
  createdBy: LimitedUser
  """
  If null, this is a new dashboard and should be initialized by the client
  """
  state: String
  createdAt: DateTime!
  updatedAt: DateTime!
}

type DashboardCollection {
  items: [Dashboard!]!
  cursor: String
  totalCount: Int!
}

input WorkspaceDashboardsFilter {
  projectIds: [String!]
  search: String
}

input ProjectDashboardsFilter {
  search: String
}

input DashboardCreateInput {
  name: String!
}

input DashboardUpdateInput {
  id: String!
  name: String
  projectIds: [String!]
  state: String
}
