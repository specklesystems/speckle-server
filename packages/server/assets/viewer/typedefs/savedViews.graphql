enum SavedViewVisibility {
  public
  authorOnly
}

type SavedView {
  id: ID!
  name: String!
  description: String
  groupName: String
  author: LimitedUser
  createdAt: DateTime!
  updatedAt: DateTime!
  """
  Original resource ID string that this view is associated with.
  """
  resourceIdString: String!
  """
  Same as resourceIdString, but split into an array of resource IDs.
  """
  resourceIds: [String!]!
  isHomeView: Boolean!
  visibility: SavedViewVisibility!
  """
  Viewer state, the actual view configuration
  """
  viewerState: JSONObject!
  """
  Encoded screenshot of the view
  """
  screenshot: String!
  """
  For figuring out position in the group
  """
  position: Float!
}

type SavedViewCollection {
  cursor: String
  totalCount: Int!
  items: [SavedView!]!
}

input SavedViewGroupViewsInput {
  """
  Whether to only views authored by the current user
  """
  onlyAuthored: Boolean
  """
  Whether to only include views matching this search term
  """
  search: String
  """
  Optionally specify sort direction. Default: descending
  """
  sortDirection: SortDirection
  """
  Optionally specify sort by field. Default: updatedAt
  Options: updatedAt, createdAt, name
  """
  sortBy: String
  limit: Int
  cursor: String
}

type SavedViewGroup {
  id: ID!
  projectId: ID!
  """
  Resources that were used to find this group
  """
  resourceIds: [String!]!
  title: String!
  isUngroupedViewsGroup: Boolean!
  views(input: SavedViewGroupViewsInput!): SavedViewCollection!
}

type SavedViewGroupCollection {
  cursor: String
  totalCount: Int!
  items: [SavedViewGroup!]!
}

input SavedViewGroupsInput {
  """
  Viewer resource ID string that identifies which resources should be loaded
  """
  resourceIdString: String!
  """
  Whether to only include groups w/ views authored by the current user
  """
  onlyAuthored: Boolean
  """
  Whether to only include groups that have views matching this search term
  """
  search: String
  limit: Int
  cursor: String
}

extend type Project {
  savedViewGroups(input: SavedViewGroupsInput!): SavedViewGroupCollection!
  savedViewGroup(id: ID!): SavedViewGroup!
}

input CreateSavedViewInput {
  projectId: ID!
  resourceIdString: String!
  """
  Group name, if grouping necessary
  """
  groupName: String

  """
  Auto-generated name, if not specified
  """
  name: String
  description: String
  """
  SerializedViewerState. If omitted, comment won't render (correctly) inside the
  viewer, but will still be retrievable through the API
  """
  viewerState: JSONObject!
  """
  Encoded screenshot of the view
  """
  screenshot: String!
  """
  Optionally also set this as the home/default view for the target model
  """
  isHomeView: Boolean
  """
  Set visibility of the view. Default: public
  """
  visibility: SavedViewVisibility
}

type SavedViewMutations {
  createView(input: CreateSavedViewInput!): SavedView!
}

extend type ProjectMutations {
  savedViewMutations: SavedViewMutations!
}
