import{u as i,d as u,M as d}from"./BP3k-m0m.js";import{e as l,A as _,ah as m,ac as f,x as h,c as g,b as y,o as k}from"./EjUDGYUW.js";const b={class:"flex items-center justify-center"},M=l({__name:"callback",setup(S){const o=m(),a=h(),{getChallenge:n}=i();return _(async()=>{const t=o.query.access_code;if(t){const s=n(),e=f(),c={appId:e.public.appId,appSecret:e.public.appSecret,accessCode:t,challenge:s},r=await fetch("https://app.speckle.systems/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),{token:p}=await r.json();u.set("draw_auth_token",p,{expires:7,secure:!0,sameSite:"Strict"})}a.replace("/")}),(t,s)=>{const e=d;return k(),g("div",b,[y(e)])}}});export{M as default};
